{"version":3,"sources":["components/AdminButtonBar/admin-button-bar.style.js","components/AdminButtonBar/AdminButtonBar.js","components/WineElement/WineElement.js","components/ProductElement/ProductElement.js","components/ProductOverview/ProductOverview.js","useFetchProducts/useFetchProducts.js","useRemoveDuplicateSpans/useRemoveDuplicateSpans.js","pages/ProductsPage/ProductsPage.js"],"names":["AdminButtonBarContainer","styled","div","_templateObject","_taggedTemplateLiteral","AdminButtonContainer","_templateObject2","AdminButton","button","_templateObject3","colors","main","AdminButtonBar","_ref","_id","product","token","useSelector","selectCurrentUser","dispatch","useDispatch","_jsxs","children","_jsx","type","onClick","toggleModal","setProductToEdit","FontAwesomeIcon","icon","faEdit","size","color","updateProdut","visible","faEye","faEyeSlash","deleteProduct","faTrash","WineElement","couleur","WinePriceContainer","map","isChecked","WinePriceElement","className","value","style","display","justifyContent","faWineBottle","Number","price","toFixed","ProductElement","index","length","description","title","category","user","TableauContent","role","first","concat","every","ProductOverview","loading","products","setFilter","filter","TableauHomePage","LoaderElement","width","subCategory","findSubCategoryName","useFetchProducts","setLoading","categorySelected","selectProductsByCategory","useEffect","getProductsByLocation","placeLocation","useRemoveDuplicateSpans","removeDuplicateSpans","useCallback","classname","document","querySelectorAll","forEach","element","remove","useLayoutEffect","categories","cat","_cat$subCategory","sc","slug","item","undefined","flat","ProductsPage","useParams","_useState","useState","_useState2","_slicedToArray","selectProductsBySubCategory"],"mappings":"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","file":"static/js/4.fa9b7f64.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport { colors } from \"../../_const\";\n\nexport const AdminButtonBarContainer = styled.div`\n  position: relative;\n  margin: 12px 0px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n`;\n\nexport const AdminButtonContainer = styled.div`\n  margin: 8px;\n`;\n\nexport const AdminButton = styled.button`\n  border: none;\n  outline: none;\n  border-radius: 50px;\n  padding: 12px;\n  background: ${colors.main};\n  :active {\n    background: black;\n  }\n`;\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  AdminButton,\n  AdminButtonBarContainer,\n  AdminButtonContainer,\n} from \"./admin-button-bar.style\";\nimport {\n  deleteProduct,\n  updateProdut,\n} from \"../../redux/reducers/Products/querries\";\nimport {\n  setProductToEdit,\n  toggleModal,\n} from \"../../redux/reducers/Products/actions\";\nimport { selectCurrentUser } from \"../../redux/reducers/User/selector\";\nimport {\n  faEdit,\n  faEye,\n  faEyeSlash,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst AdminButtonBar = ({ _id, product }) => {\n  const { token } = useSelector(selectCurrentUser);\n  const dispatch = useDispatch();\n  return (\n    <AdminButtonBarContainer>\n      <AdminButtonContainer>\n        <AdminButton\n          type=\"button\"\n          onClick={() => {\n            dispatch(toggleModal(\"editer\"));\n            dispatch(setProductToEdit(product));\n          }}\n        >\n          <FontAwesomeIcon icon={faEdit} size=\"2x\" color=\"purple\" />\n        </AdminButton>\n      </AdminButtonContainer>\n      <AdminButtonContainer>\n        <AdminButton\n          type=\"button\"\n          onClick={() =>\n            updateProdut({ _id, visible: !product?.visible }, dispatch, token)\n          }\n        >\n          <FontAwesomeIcon\n            icon={product?.visible ? faEye : faEyeSlash}\n            size=\"2x\"\n            color=\"grey\"\n          />\n        </AdminButton>\n      </AdminButtonContainer>\n      <AdminButtonContainer>\n        <AdminButton\n          type=\"button\"\n          onClick={() => deleteProduct(_id, dispatch, token)}\n        >\n          <FontAwesomeIcon icon={faTrash} size=\"2x\" color=\"red\" />\n        </AdminButton>\n      </AdminButtonContainer>\n    </AdminButtonBarContainer>\n  );\n};\n\nexport default AdminButtonBar;\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport {\n  WinePriceContainer,\n  WinePriceElement,\n} from \"../TableauHomePage/tableau-homepage.style\";\nimport { faWineBottle } from \"@fortawesome/free-solid-svg-icons\";\n\nconst WineElement = ({ couleur }) => {\n  return (\n    <WinePriceContainer>\n      {couleur.map(\n        (color) =>\n          color?.isChecked && (\n            <WinePriceElement\n              className=\"price wineprice\"\n              key={color.value}\n              color={color.value}\n            >\n              <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n                <span>\n                  <FontAwesomeIcon icon={faWineBottle} size=\"1x\" /> :\n                </span>\n                <span>{Number(color.price).toFixed(2)} €</span>\n              </div>\n            </WinePriceElement>\n          )\n      )}\n    </WinePriceContainer>\n  );\n};\n\nexport default WineElement;\n","import React from \"react\";\nimport AdminButtonBar from \"../AdminButtonBar/AdminButtonBar\";\nimport { TableauContent } from \"../TableauHomePage/tableau-homepage.style\";\nimport { selectCurrentUser } from \"../../redux/reducers/User/selector\";\nimport { useSelector } from \"react-redux\";\nimport WineElement from \"../WineElement/WineElement\";\n\nconst ProductElement = ({ product, index, length }) => {\n  const { _id, price, description, title, visible, category, couleur } =\n    product;\n  const user = useSelector(selectCurrentUser);\n\n  return (\n    <TableauContent\n      visible={user?.role === \"isAdmin\" || visible}\n      first={category === \"today\" && index === 0 && length > 1}\n    >\n      {user && user.role === \"isAdmin\" && (\n        <AdminButtonBar _id={_id} product={product} />\n      )}\n      <h3 className=\"title\">\n        <span>{`${visible ? \"\" : \"CACHÉ : \"} ${title}`}</span>\n        {category !== \"le-vin\" || couleur.every((color) => !color.isChecked) ? (\n          <span className=\"price\">{price?.toFixed(2)} €</span>\n        ) : (\n          <WineElement couleur={couleur} />\n        )}\n      </h3>\n      {/* <WineColorContainer>\n        {couleur.map(\n          (color) =>\n            color.isChecked && (\n              <WineItemElement key={color.value} color={color.value}>\n                <FontAwesomeIcon icon={faWineBottle} size=\"2x\" />\n              </WineItemElement>\n            )\n        )}\n      </WineColorContainer> */}\n      <p className=\"description\">{description}</p>\n    </TableauContent>\n  );\n};\n\nexport default ProductElement;\n","import React from \"react\";\nimport { findSubCategoryName } from \"../../redux/reducers/Products/utils\";\nimport LoaderElement from \"../Loader/LoaderElement\";\nimport ProductElement from \"../ProductElement/ProductElement\";\nimport TableauHomePage from \"../TableauHomePage/TableauHomePage\";\nconst ProductOverview = ({ loading, products, setFilter, filter }) => {\n  return (\n    <TableauHomePage setFilter={setFilter} filter={filter}>\n      {loading ? (\n        <LoaderElement />\n      ) : (\n        products?.map((product, index) => {\n          return (\n            <div key={product._id} style={{ width: \"100%\" }}>\n              {product?.subCategory && findSubCategoryName(product)}\n              <ProductElement\n                product={product}\n                index={index}\n                length={products.length}\n              />\n            </div>\n          );\n        })\n      )}\n    </TableauHomePage>\n  );\n};\n\nexport default ProductOverview;\n","import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getProductsByLocation } from \"../redux/reducers/Products/querries\";\nimport { placeLocation } from \"../_const\";\nimport { selectProductsByCategory } from \"../redux/reducers/Products/selectors\";\n\nfunction useFetchProducts(setLoading, categorySelected) {\n  const products = useSelector(selectProductsByCategory(categorySelected));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    getProductsByLocation(placeLocation, dispatch, setLoading);\n  }, [dispatch, setLoading, categorySelected]);\n\n  return products;\n}\n\nexport default useFetchProducts;\n","import { useLayoutEffect, useCallback } from \"react\";\nimport { categories } from \"../data/categories/categories\";\n\nconst useRemoveDuplicateSpans = () => {\n  const removeDuplicateSpans = useCallback((classname) => {\n    let spans = document.querySelectorAll(`.${classname}`);\n    spans.forEach((element, index) => {\n      if (index > 0) {\n        element?.remove();\n      }\n    });\n  }, []);\n  useLayoutEffect(() => {\n    let classNames = categories\n      ?.map((cat) => cat?.subCategory?.map((sc) => sc?.slug))\n      .filter((item) => item !== undefined)\n      .flat();\n    classNames.forEach((className) => removeDuplicateSpans(className));\n    //methode caca pour faire ça\n  });\n};\n\nexport default useRemoveDuplicateSpans;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport ProductOverview from \"../../components/ProductOverview/ProductOverview\";\nimport { selectProductsBySubCategory } from \"../../redux/reducers/Products/selectors\";\nimport useFetchProducts from \"../../useFetchProducts/useFetchProducts\";\nimport useRemoveDuplicateSpans from \"../../useRemoveDuplicateSpans/useRemoveDuplicateSpans\";\n\nconst ProductsPage = ({ loading, setLoading }) => {\n  const params = useParams();\n\n  let category = params.category || \"today\";\n  useFetchProducts(setLoading, category);\n  useRemoveDuplicateSpans();\n  const [filter, setFilter] = useState(\"\");\n  const products = useSelector(selectProductsBySubCategory(filter, category));\n\n  useEffect(() => {\n    setFilter(\"\");\n  }, [loading, category]);\n\n  return (\n    <main>\n      <ProductOverview\n        products={products}\n        loading={loading}\n        setFilter={setFilter}\n        filter={filter}\n      />\n    </main>\n  );\n};\n\nexport default ProductsPage;\n"],"sourceRoot":""}