{"version":3,"sources":["redux/reducers/User/querries.js","pages/Login/login.style.js","pages/Login/Login.js"],"names":["logger","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","dispatch","setLoading","email","password","response","wrap","_context","prev","next","axios","method","url","concat","serverURI","data","sent","status","setCurrentUser","token","role","setUserMessage","message","t0","stop","_x","_x2","_x3","apply","arguments","LoginContainer","styled","div","_templateObject2","_taggedTemplateLiteral","colors","main","secondary","FormContainer","form","_templateObject3","LoginButton","button","_templateObject4","props","disabled","css","_templateObject","Login","loading","useDispatch","_useState","useState","_useState2","_slicedToArray","user","setUser","setCredentials","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","_ref2","preventDefault","_jsx","children","_jsxs","LoaderElement","onSubmit","FormInput","type","label","handleChange","required"],"mappings":"gPAIaA,EAAM,eAAAC,EAAAC,YAAAC,cAAAC,MAAG,SAAAC,EAAOC,EAAaC,EAAUC,GAAU,IAAAC,EAAAC,EAAAC,EAAA,OAAAR,cAAAS,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAE3C,OADTN,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SACfF,GAAW,GAAMK,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEQC,IAAM,CAC3BC,OAAQ,OACRC,IAAI,GAADC,OAAKC,IAAS,eACjBC,KAAM,CAAEZ,QAAOC,cACd,KAAD,EAC2B,OALvBC,EAAQE,EAAAS,MAKDD,KAAKE,QAChBhB,EACEiB,YAAe,CAAEC,MAAOd,EAASU,KAAKI,MAAOC,KAAMf,EAASU,KAAKK,QAGrEnB,EAASoB,YAAehB,EAASU,KAAKO,UACtCpB,GAAW,GAAOK,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,SAElBN,EAASoB,YAAe,gCAA0B,yBAAAd,EAAAiB,OAAA,GAAAzB,EAAA,mBAErD,gBAnBkB0B,EAAAC,EAAAC,GAAA,OAAAhC,EAAAiC,MAAA,KAAAC,UAAA,K,cCONC,EAAiBC,IAAOC,IAAGC,MAAAC,YAAA,4hBAOEC,IAAOC,KAASD,IAAOE,UAgBpDF,IAAOC,MAIPE,EAAgBP,IAAOQ,KAAIC,MAAAN,YAAA,2GAO3BO,EAAcV,IAAOW,OAAMC,MAAAT,YAAA,4KAI7BC,IAAOC,KACID,IAAOC,KAEbD,IAAOE,WAjDJ,SAACO,GAClB,GAAIA,EAAMC,SACR,OAAOC,YAAGC,MAAAb,YAAA,sCAId,I,OCgDec,UAlDD,SAAHrD,GAAiC,IAA3BsD,EAAOtD,EAAPsD,QAAS/C,EAAUP,EAAVO,WAClBD,EAAWiD,cACjBC,EAAwBC,mBAAS,CAAEjD,MAAO,GAAIC,SAAU,KAAKiD,EAAAC,YAAAH,EAAA,GAAtDI,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GAEdI,EAAiB,SAACC,GACtB,IAAAC,EAAwBD,EAAEE,OAAlBC,EAAIF,EAAJE,KAAMC,EAAKH,EAALG,MACdN,EAAOO,wBAAC,CAAC,EAAIR,GAAI,GAAAS,YAAA,GAAGH,EAAOC,IAC7B,EAEMG,EAAY,eAAAC,EAAAtE,YAAAC,cAAAC,MAAG,SAAAC,EAAO2D,GAAC,OAAA7D,cAAAS,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAC3BiD,EAAES,iBACFzE,EAAO6D,EAAMtD,EAAUC,GAAY,wBAAAK,EAAAiB,OAAA,GAAAzB,EAAA,KACpC,gBAHiB0B,GAAA,OAAAyC,EAAAtC,MAAA,KAAAC,UAAA,KAIlB,OACEuC,cAAA,QAAAC,SACEC,eAACxC,EAAc,CAAAuC,SAAA,CACbD,cAAA,MAAAC,SAAI,cACHpB,EACCmB,cAACG,IAAa,IAEdD,eAAChC,EAAa,CAACkC,SAAUP,EAAaI,SAAA,CACpCD,cAACK,IAAS,CACRC,KAAK,QACLb,KAAK,QACLc,MAAM,SACNb,MAAOP,EAAKpD,MACZyE,aAAcnB,EACdoB,UAAQ,IAEVT,cAACK,IAAS,CACRC,KAAK,WACLb,KAAK,WACLc,MAAM,eACNb,MAAOP,EAAKnD,SACZwE,aAAcnB,EACdoB,UAAQ,IAEVT,cAAC3B,EAAW,CACVI,UAAWU,EAAKnD,WAAamD,EAAKpD,OAAS8C,EAC3CyB,KAAK,SAAQL,SACd,wBAQb,C","file":"static/js/3.14385b19.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { serverURI } from \"../../../_const\";\nimport { setCurrentUser, setUserMessage } from \"./actions\";\n\nexport const logger = async (credentials, dispatch, setLoading) => {\n  const { email, password } = credentials;\n  setLoading(true);\n  try {\n    const response = await axios({\n      method: \"POST\",\n      url: `${serverURI}/auth/login`,\n      data: { email, password },\n    });\n    if (response.data.status === 200) {\n      dispatch(\n        setCurrentUser({ token: response.data.token, role: response.data.role })\n      );\n    }\n    dispatch(setUserMessage(response.data.message));\n    setLoading(false);\n  } catch (error) {\n    dispatch(setUserMessage(\"Il y à eu un problème\"));\n  }\n};\n\nexport const validateToken = (token) => {\n  return axios({\n    method: \"POST\",\n    url: `${serverURI}/verify/`,\n    data: { token },\n  });\n};\n","import styled, { css } from \"styled-components\";\nimport { colors } from \"../../_const\";\n\nconst isDisabled = (props) => {\n  if (props.disabled) {\n    return css`\n      background: #ccc;\n    `;\n  }\n};\n\nexport const LoginContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50px;\n  margin: 12px;\n  background: linear-gradient(to right, ${colors.main}, ${colors.secondary});\n  background-size: 400% 400%;\n  padding-bottom: 12px;\n  animation: backgroundMoving 25s infinite ease;\n  @keyframes backgroundMoving {\n    0% {\n      background-position: 92% 0%;\n    }\n    50% {\n      background-position: 9% 100%;\n    }\n    100% {\n      background-position: 92% 0%;\n    }\n  }\n  & > h2 {\n    color: ${colors.main};\n  }\n`;\n\nexport const FormContainer = styled.form`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const LoginButton = styled.button`\n  font-size: 2em;\n  background-color: transparent;\n  outline: none;\n  color: ${colors.main};\n  border: 3px solid ${colors.main};\n  border-radius: 50px;\n  background: ${colors.secondary};\n  ${isDisabled}\n`;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport FormInput from \"../../components/FormInput/FormInput\";\nimport LoaderElement from \"../../components/Loader/LoaderElement\";\nimport { logger } from \"../../redux/reducers/User/querries\";\nimport { FormContainer, LoginButton, LoginContainer } from \"./login.style\";\n\nconst Login = ({ loading, setLoading }) => {\n  const dispatch = useDispatch();\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\n\n  const setCredentials = (e) => {\n    const { name, value } = e.target;\n    setUser({ ...user, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    logger(user, dispatch, setLoading);\n  };\n  return (\n    <main>\n      <LoginContainer>\n        <h2>Connexion</h2>\n        {loading ? (\n          <LoaderElement />\n        ) : (\n          <FormContainer onSubmit={handleSubmit}>\n            <FormInput\n              type=\"email\"\n              name=\"email\"\n              label=\"e-mail\"\n              value={user.email}\n              handleChange={setCredentials}\n              required\n            />\n            <FormInput\n              type=\"password\"\n              name=\"password\"\n              label=\"mot de passe\"\n              value={user.password}\n              handleChange={setCredentials}\n              required\n            />\n            <LoginButton\n              disabled={!user.password || !user.email || loading}\n              type=\"submit\"\n            >\n              Se Connecter\n            </LoginButton>\n          </FormContainer>\n        )}\n      </LoginContainer>\n    </main>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}